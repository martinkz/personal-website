!function(e){"use strict";function t(e,t){var n;window.CustomEvent?n=new CustomEvent(t):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0)),e.dispatchEvent(n)}function n(e){var t=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];return i(t.join(","),e).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})}function i(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function o(e,t){var i=n(e),o=i.indexOf(document.activeElement);t.shiftKey&&0===o?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||o!==i.length-1||(i[0].focus(),t.preventDefault())}function d(e){var t=n(e);t.length&&t[0].focus()}var u,a=function(e,n){function a(t){s.shown&&!e.contains(t.target)&&d(e)}function c(){s.shown=!0,e.removeAttribute("aria-hidden"),n.setAttribute("aria-hidden","true"),u=document.activeElement,d(e),document.body.addEventListener("focus",a,!0),t(e,"dialog:show")}function r(){s.shown=!1,e.setAttribute("aria-hidden","true"),n.removeAttribute("aria-hidden"),u&&u.focus(),document.body.removeEventListener("focus",a,!0),t(e,"dialog:hide")}var f="data-a11y-dialog",s=this;n=n||document.querySelector("#main"),this.shown=!1,this.show=c,this.hide=r,i("["+f+'-show="'+e.id+'"]').forEach(function(e){e.addEventListener("click",c)}),i("["+f+"-hide]",e).concat(i("["+f+'-hide="'+e.id+'"]')).forEach(function(e){e.addEventListener("click",r)}),document.addEventListener("keydown",function(t){s.shown&&27===t.which&&(t.preventDefault(),r()),s.shown&&9===t.which&&o(e,t)})};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:"function"==typeof define&&define.amd?define("A11yDialog",[],function(){return a}):"object"==typeof e&&(e.A11yDialog=a)}(window);